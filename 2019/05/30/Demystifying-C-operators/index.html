<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Demystifying C# operators | luka712 blog</title><meta name="description" content="Using C# operators"><meta name="generator" content="luka712 blog"><meta name="author" content="Luka Erkapic"><meta name="keywords" content="sjaak van den berg, svdb, bitcoin, crypto, payment, integration, bitcoins, wordpress, betaling, webshop, front end, design, ontwerp, developer"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="stylesheet" type="text/css" href="/styles/style.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"></head><body itemscope itemtype="https://schema.org/WebPage" onload="onLoad()"><header itemscope itemtype="https://schema.org/WPHeader"><h1><a href="/" alt="luka712 blog" title="luka712 blog" itemprop="headline" class="header">luka712 blog</a></h1><p itemprop="description"></p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="Home" title="Home" itemprop="url" class="header">Home</a></li><li itemprop="name"><a href="/About" alt="About" title="About" itemprop="url" class="header">About</a></li></ul></nav><div id="render-space"><canvas id="render-canvas"></canvas></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">Demystifying C# operators</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2019-05-30T12:42:04.000Z"> Thursday, May 30th 2019 at 14:42</time><br>Last updated on<time itemprop="dateModified" datetime="2019-05-30T12:42:04.000Z"> Thursday, May 30th 2019 at 15:46</time></span><p>As I was studying for my C# exam, while looking throught youtube comments section, I saw a comment that made me realize that C# operators are still bit unclear on why and how are they used. </p>
<p>Operator in question was | operator, and what was point of confusion is how it is used, since it behaves differently on different types. For booleans it is same as || expects it does not do short circuiting ( evalutes both sides, even though first is true ). For integers it acts as bitwise logical or. So it depends on data type, not the operator itself, and should never be confused.</p>
<p>Anyway, easiest way to think about operators, is as special method, even though it might not be 100% correct. But let’s dive into it.</p>
<p>One of the most common is + sign, and it behaves differently on different types.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> number = <span class="number">4</span> + <span class="number">4</span>;                                 <span class="comment">// is 4</span></span><br><span class="line"><span class="keyword">string</span> name = <span class="string">"4"</span> + <span class="string">"4"</span>;                            <span class="comment">// is "44"</span></span><br><span class="line">Action action = () =&gt; &#123; Console.Write(<span class="string">"Hello "</span>); &#125;; <span class="comment">// appends method</span></span><br><span class="line">action += () =&gt; &#123; Console.Write(<span class="string">"World"</span>); &#125;;        <span class="comment">// appends another methods</span></span><br><span class="line">action();                                           <span class="comment">// calls both methods and prints "Hello World"</span></span><br></pre></td></tr></table></figure>
<p>But how is it actually implemented ? </p>
<p>Let’s take a look at how it might be implemented for string, before doing an example.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">String</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="keyword">operator</span> +(String a, String b)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">string</span>.Concat(a, b);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>Of course this won’t compile, string is reserved class. But it is simple example how it might be implemented for string.<br>Now for actual example, you can follow this one. For example, I’m creating <code>CustomList</code> which has +, -, ==, != operators. You can use others as well if you wish.</p>
<p>Let’s say that + operators adds element to list, instead of using <code>Add</code> method.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class CustomList&lt;T&gt; : List&lt;T&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CustomList&lt;T&gt; <span class="keyword">operator</span> +(CustomList&lt;T&gt; list, T entry)</span><br><span class="line">    &#123;</span><br><span class="line">        list.Add(entry);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And it can be used as </p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CustomList&lt;<span class="keyword">int</span>&gt; list = <span class="keyword">new</span> CustomList&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">    list += <span class="number">1</span>;</span><br><span class="line">    list += <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="keyword">int</span> i <span class="keyword">in</span> list)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Console.ReadLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>What about - operator? Simple as well.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> CustomList&lt;T&gt; <span class="keyword">operator</span> -(CustomList&lt;T&gt; list, T entry)</span><br><span class="line">&#123;</span><br><span class="line">    list.Remove(entry);</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>But what if you want to add 2 lists together with plus operator.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> CustomList&lt;T&gt; <span class="keyword">operator</span> +(CustomList&lt;T&gt; list, CustomList&lt;T&gt; other)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="keyword">var</span> t <span class="keyword">in</span> other)</span><br><span class="line">    &#123;</span><br><span class="line">        list.Add(t);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And expand program to actually use + operator on list.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CustomList&lt;<span class="keyword">int</span>&gt; list = <span class="keyword">new</span> CustomList&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">    list += <span class="number">1</span>;</span><br><span class="line">    list += <span class="number">2</span>;</span><br><span class="line">    CustomList&lt;<span class="keyword">int</span>&gt; list2 = <span class="keyword">new</span> CustomList&lt;<span class="keyword">int</span>&gt; &#123; <span class="number">10</span>, <span class="number">12</span>, <span class="number">11</span> &#125;;</span><br><span class="line">    list += list2 + <span class="number">14</span>;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="keyword">int</span> i <span class="keyword">in</span> list)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(i);</span><br><span class="line">    &#125;</span><br><span class="line">    Console.ReadLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Can you guess the output ? :)</p>
<p>As for == and != operators, actually both need to implemented and can be done like this</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="keyword">operator</span> ==(CustomList&lt;T&gt; a, CustomList&lt;T&gt; b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a.Count != b.Count)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.Count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!b.Contains(a[i]))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="keyword">operator</span> !=(CustomList&lt;T&gt; a, CustomList&lt;T&gt; b)</span><br><span class="line">        =&gt; !(a == b);</span><br></pre></td></tr></table></figure>
<p>So this checks if lists have same number of elements and same elements, and can be used like this</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CustomList&lt;<span class="keyword">int</span>&gt; a = <span class="keyword">new</span> CustomList&lt;<span class="keyword">int</span>&gt;() &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;</span><br><span class="line">CustomList&lt;<span class="keyword">int</span>&gt; b = <span class="keyword">new</span> CustomList&lt;<span class="keyword">int</span>&gt;() &#123; <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(a == b); <span class="comment">// true</span></span><br><span class="line">b += <span class="number">4</span>;                    <span class="comment">// b list has new element</span></span><br><span class="line">Console.WriteLine(a == b); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>Hope that this post has explained operators a bit, as you can see, there is nothing special about them and any type can use them for different purposes :).</p>
</article></main><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/babylonjs/3.3.0-alpha.12/babylon.js"></script><script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script><script src="https://cdn.jsdelivr.net/npm/babylonjs-gui@3.3.0/babylon.gui.min.js"></script><script src="/scripts/index.js" type="text/javascript"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
e=o.createElement(i);r=o.getElementsByTagName(i)[0];
e.src='//www.google-analytics.com/analytics.js';
r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','UA-121717766-1');ga('send','pageview');</script></body></html>