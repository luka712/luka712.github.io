<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Demystifying C# operators | luka712 blog</title><meta name="description"><meta name="generator" content="luka712 blog"><meta name="author" content="Luka Erkapic"><meta name="keywords" content="sjaak van den berg, svdb, bitcoin, crypto, payment, integration, bitcoins, wordpress, betaling, webshop, front end, design, ontwerp, developer"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="stylesheet" type="text/css" href="/styles/style.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"></head><body itemscope itemtype="https://schema.org/WebPage" onload="onLoad()"><header itemscope itemtype="https://schema.org/WPHeader"><h1><a href="/" alt="luka712 blog" title="luka712 blog" itemprop="headline" class="header">luka712 blog</a></h1><p itemprop="description"></p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="Home" title="Home" itemprop="url" class="header">Home</a></li><li itemprop="name"><a href="/About" alt="About" title="About" itemprop="url" class="header">About</a></li></ul></nav><div id="render-space"><canvas id="render-canvas"></canvas></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">Demystifying C# operators</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2019-05-30T12:42:04.000Z"> Thursday, May 30th 2019 at 14:42</time><br>Last updated on<time itemprop="dateModified" datetime="2019-05-30T12:42:04.000Z"> Thursday, May 30th 2019 at 15:39</time></span><p>As I was studying for my C# exam, while looking throught youtube comments section, I saw a comment that made me realize that C# operators are still bit unclear on why and how are they used. </p>
<p>Operator in question was | operator, and what was point of confusion is how it is used, since it behaves differently on different types. For booleans it is same as || expects it does not do short circuiting ( evalutes both sides, even though first is true ). For integers it acts as bitwise logical or. So it depends on data type, not the operator itself, and should never be confused.</p>
<p>Anyway, easiest way to think about operators, is as special method, even though it might not be 100% correct. But let’s dive into it.</p>
<p>One of the most common is + sign, and it behaves differently on different types.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int number = 4 + 4;                                 // is 4</span><br><span class="line">string name = &quot;4&quot; + &quot;4&quot;;                            // is &quot;44&quot;</span><br><span class="line">Action action = () =&gt; &#123; Console.Write(&quot;Hello &quot;); &#125;; // appends method</span><br><span class="line">action += () =&gt; &#123; Console.Write(&quot;World&quot;); &#125;;        // appends another methods</span><br><span class="line">action();                                           // calls both methods and prints &quot;Hello World&quot;</span><br></pre></td></tr></table></figure>
<p>But how is it actually implemented ? </p>
<p>Let’s take a look at how it might be implemented for string, before doing an example.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class String</span><br><span class="line">    &#123;</span><br><span class="line">        public static string operator +(String a, String b)</span><br><span class="line">        &#123;</span><br><span class="line">            return string.Concat(a, b);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>Of course this won’t compile, string is reserved class. But it is simple example how it might be implemented for string.<br>Now for actual example, you can follow this one. For example, I’m creating <code>CustomList</code> which has +, -, ==, != operators. You can use others as well if you wish.</p>
<p>Let’s say that + operators adds element to list, instead of using <code>Add</code> method.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class CustomList&lt;T&gt; : List&lt;T&gt;</span><br><span class="line">&#123;</span><br><span class="line">    public static CustomList&lt;T&gt; operator +(CustomList&lt;T&gt; list, T entry)</span><br><span class="line">    &#123;</span><br><span class="line">        list.Add(entry);</span><br><span class="line">        return list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And it can be used as </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    CustomList&lt;int&gt; list = new CustomList&lt;int&gt;();</span><br><span class="line">    list += 1;</span><br><span class="line">    list += 2;</span><br><span class="line">    foreach(int i in list)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Console.ReadLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>What about - operator? Simple as well.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static CustomList&lt;T&gt; operator -(CustomList&lt;T&gt; list, T entry)</span><br><span class="line">&#123;</span><br><span class="line">    list.Remove(entry);</span><br><span class="line">    return list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>But what if you want to add 2 lists together with plus operator.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public static CustomList&lt;T&gt; operator +(CustomList&lt;T&gt; list, CustomList&lt;T&gt; other)</span><br><span class="line">&#123;</span><br><span class="line">    foreach(var t in other)</span><br><span class="line">    &#123;</span><br><span class="line">        list.Add(t);</span><br><span class="line">    &#125;</span><br><span class="line">    return list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And expand program to actually use + operator on list.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    CustomList&lt;int&gt; list = new CustomList&lt;int&gt;();</span><br><span class="line">    list += 1;</span><br><span class="line">    list += 2;</span><br><span class="line">    CustomList&lt;int&gt; list2 = new CustomList&lt;int&gt; &#123; 10, 12, 11 &#125;;</span><br><span class="line">    list += list2 + 14;</span><br><span class="line">    foreach(int i in list)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(i);</span><br><span class="line">    &#125;</span><br><span class="line">    Console.ReadLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Can you guess the output ? :)</p>
<p>As for == and != operators, actually both need to implemented and can be done like this</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public static bool operator ==(CustomList&lt;T&gt; a, CustomList&lt;T&gt; b)</span><br><span class="line">    &#123;</span><br><span class="line">        if(a.Count != b.Count)</span><br><span class="line">        &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        for(int i = 0; i &lt; a.Count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(!b.Contains(a[i]))</span><br><span class="line">            &#123;</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static bool operator !=(CustomList&lt;T&gt; a, CustomList&lt;T&gt; b)</span><br><span class="line">        =&gt; !(a == b);</span><br></pre></td></tr></table></figure>
<p>So this checks if lists have same number of elements and same elements, and can be used like this</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CustomList&lt;int&gt; a = new CustomList&lt;int&gt;() &#123; 1, 2, 3 &#125;;</span><br><span class="line">CustomList&lt;int&gt; b = new CustomList&lt;int&gt;() &#123; 3, 2, 1 &#125;;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(a == b); // true</span><br><span class="line">b += 4;                    // b list has new element</span><br><span class="line">Console.WriteLine(a == b); // false</span><br></pre></td></tr></table></figure>
<p>Hope that this post has explained operators a bit, as you can see, there is nothing special about them and any type can use them for different purposes :).</p>
</article></main><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/babylonjs/3.3.0-alpha.12/babylon.js"></script><script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script><script src="https://cdn.jsdelivr.net/npm/babylonjs-gui@3.3.0/babylon.gui.min.js"></script><script src="/scripts/index.js" type="text/javascript"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
e=o.createElement(i);r=o.getElementsByTagName(i)[0];
e.src='//www.google-analytics.com/analytics.js';
r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','UA-121717766-1');ga('send','pageview');</script></body></html>