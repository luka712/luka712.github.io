<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Masking | luka712 blog</title><meta name="description" content="This one is all about masking."><meta name="generator" content="luka712 blog"><meta name="author" content="Luka Erkapic"><meta name="keywords" content="sjaak van den berg, svdb, bitcoin, crypto, payment, integration, bitcoins, wordpress, betaling, webshop, front end, design, ontwerp, developer"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="stylesheet" type="text/css" href="/styles/style.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"></head><body itemscope itemtype="https://schema.org/WebPage" onload="onLoad()"><header itemscope itemtype="https://schema.org/WPHeader"><h1><a href="/" alt="luka712 blog" title="luka712 blog" itemprop="headline" class="header">luka712 blog</a></h1><p itemprop="description"></p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="Home" title="Home" itemprop="url" class="header">Home</a></li><li itemprop="name"><a href="/About" alt="About" title="About" itemprop="url" class="header">About</a></li></ul></nav><div id="render-space"><canvas id="render-canvas"></canvas></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">Masking</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2018-08-05T17:06:48.000Z"> Sunday, August 5th 2018 at 19:06</time><br>Last updated on<time itemprop="dateModified" datetime="2018-08-05T17:06:48.000Z"> Monday, August 6th 2018 at 1:45</time></span><h5 id="About-masking"><a href="#About-masking" class="headerlink" title="About masking"></a>About masking</h5><p><strong>So what is masking ? </strong></p>
<p>Easy to explain with 2 images.</p>
<p>First no mask.<br><img src="/images/8/image1.png" style="width:50%"></p>
<p>Then with mask.<br><img src="/images/8/image2.png" style="width:50%"></p>
<p>Of course this doesn’t have to be black, that depends on what you want, but for this I just want to focus on getting basics first and foremost.</p>
<p>I’m doing this with Unity and you might be asking why not use already built in masking system. Well simple, this approach will work with almost any renderer, engine, framework… </p>
<p>Unity masking is specific to Unity, this is general shader approach. If your tool of choice supports shader and rendering to a texture, this works. It can be done without shaders using different techniques as well, but I decided to go with this one. Seems simple and nice enough.</p>
<p>Whole idea behind this is just multiplying colors (rgba channels) of your render texture to other texture or some value that will act as a mask.</p>
<p>Let’s say </p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">float</span> mask = <span class="number">0.</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// rgba stands for color red, green, blue</span></span><br><span class="line"><span class="built_in">texture</span>.rgb *= mask;</span><br><span class="line"></span><br><span class="line"><span class="comment">// in this case rgba is 0, therefore color we get is black. That's it</span></span><br></pre></td></tr></table></figure>
<h5 id="How-to"><a href="#How-to" class="headerlink" title="How to"></a>How to</h5><p>First step is to create <em>Image Effect Shader</em>.<br>Now if this is your first time seeing shaders, I already wrote a <a href="/2018/07/01/Pixelate-it-Shadertoy-Unity/">post</a> about shaders. But it’s not really necessary, this can be easily followed.</p>
<p>Anyway, find line that defines <em>sampler2D _MainTex</em> and just below it add</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">sampler2D</span> _MainTex;</span><br><span class="line"><span class="type">sampler2D</span> u_maskTex;</span><br></pre></td></tr></table></figure>
<p>If you’re not familiar with samplers, it’s just texture data, each pixel from image. Other piece of data that we need are texture coordinates, which tell us how to map those pixels. Texture coordinates are already passed to shader as uv coordinates. However those are for <em>_MainTex</em>, not our texture.But still we’re going to reuse them and modify them a bit for new texture.</p>
<p>If you are wondering what <em>_MainTex</em> actually represents. Well that’s you screen render. This mask shaders is going to act as post processing effect. So <em>_MainTex</em> is actually what is supposed to be drawn without current shader.</p>
<p>Now back to coding, in frag function add following:</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fixed4 col = tex2D(_MainTex, i.uv);</span><br><span class="line">fixed4 mask = tex2D(u_maskTex);</span><br><span class="line"><span class="keyword">return</span> col * mask;</span><br></pre></td></tr></table></figure>
<p>What <em>tex2D</em> does is creates colors from texture data and texture coordinates. Texture coordinates just say how to map passed data as I mentioned. For example if you were to multiply coordinates <em>i.uv * 40.</em> you would get tiled image, because it would wrap 40 times across x and y axis.</p>
<p>Finally our render image (col) is multipled by mask image (still not passed to shader, hold on a bit).</p>
<p>Next we need C# script, so create new C# script and add it to camera.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Mask</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Shader shader;</span><br><span class="line">    <span class="keyword">public</span> Texture texture;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Material _material;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _material = <span class="keyword">new</span> Material(shader);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnRenderImage</span>(<span class="params">RenderTexture source, RenderTexture destination</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _material.SetTexture(<span class="string">"u_maskTex"</span>, texture);</span><br><span class="line">        Graphics.Blit(source, destination, _material);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Assign texture and shader to public properties from editor and that’s it, mask effect is rolling.</p>
<p><img src="/images/8/image3.png" style="width:50%"></p>
<p>I am using default particle from Unity for texture. Try using it or any image that has white and black values, black is mask, white is visible area.</p>
<p>If your result seems bit weird as mine and not quite like perfect circle, this is due to aspect ratio.</p>
<p>That is also easy fix, first we need to pass resolution to shader.<br>Add this to C# script, right after texture assign</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_material.SetTexture(<span class="string">"u_maskTex"</span>, texture);  <span class="comment">// this line should ba already added</span></span><br><span class="line">_material.SetVector(<span class="string">"u_resolution"</span>, <span class="keyword">new</span> Vector2(Screen.width, Screen.height));</span><br></pre></td></tr></table></figure>
<p>and in shader after <em>u_maskTex</em> add</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">sampler2D</span> u_maskTex;</span><br><span class="line">half2 u_resolution;</span><br></pre></td></tr></table></figure>
<p>In frag function just add code to correct aspect ratio.<br>Here is all code from frag function.</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fixed4 col = tex2D(_MainTex, i.uv);</span><br><span class="line"></span><br><span class="line">half2 maskUv = i.uv;</span><br><span class="line">maskUv -= <span class="number">.5</span>;</span><br><span class="line">maskUv.x *= u_resolution.x / u_resolution.y;</span><br><span class="line">maskUv += <span class="number">.5</span>;</span><br><span class="line"></span><br><span class="line">fixed4 mask = tex2D(u_maskTex, maskUv);</span><br><span class="line"><span class="keyword">return</span> col * mask;</span><br></pre></td></tr></table></figure>
<p>This is actually rather simple.<br>Line <em>maskUv -= .5;</em> brings coordinates from 0 to 1 to rougly -.5 to .5. Reason to do that is to center origin(middle point on screen) to (0,0) instead of (0.5, 0.5).<br>Next line <code>maskUv.x *= u_resolution.x / u_resolution.y;</code> will correct aspect ratio.<br>Then we just bring back resolution to 0 to 1 space, so that origin is at (0.5, 0.5).</p>
<p>And that should be it.</p>
<h5 id="Using-functions-for-masking"><a href="#Using-functions-for-masking" class="headerlink" title="Using functions for masking"></a>Using functions for masking</h5><p>Aside from using textures, we can create any function that’s going to return some value for mask, usually zero, but this is just math, you can do whatever you want with colors.</p>
<p>Let’s add something for rectengular mask. </p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">half rect_mask(half2 uv, half x, half y, half w, half h)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (uv.x &gt;= x &amp;&amp; uv.x &lt;= x + w</span><br><span class="line">		&amp;&amp; uv.y &gt;= y &amp;&amp; uv.y &lt;= y + h)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1.</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	    <span class="keyword">return</span> <span class="number">0.</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>X stands for x position on screen, y for y position, w for width and h for height. After this, just call it<br>inside frag function.</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> col * rect_mask(i.uv, <span class="number">0.5</span>, <span class="number">0.2</span>, <span class="number">0.7</span>, <span class="number">0.8</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/images/8/image4.png" style="width:50%"></p>
<p>Let’s quickly do one for circle as well.</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">half circle_mask(half2 uv, half2 p, half r, half b)</span><br><span class="line">&#123;</span><br><span class="line">	uv -= <span class="number">.5</span>;</span><br><span class="line">	uv.x *= u_resolution.x / u_resolution.y;</span><br><span class="line"></span><br><span class="line">	half d = <span class="built_in">distance</span>(uv, p);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (d &lt; r)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">smoothstep</span>(r, r - b, d);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0.</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> col * circle_mask(i.uv, half2(<span class="number">0.</span>, <span class="number">0.</span>), <span class="number">0.3</span>, <span class="number">0.05</span>);</span><br></pre></td></tr></table></figure>
<p>For circle function I had to move coordinates origins to center of screen and fix aspect ratio, since it would look like ellipse if ratio is not considered. Next we just get distance from origin to point p and check if distance is less then radius. </p>
<p> And finally if check passes, smoothstep is used for amount of blur on edges. If this seems like some mumbo jumbo, I will be covering circle in next blog post most likely :).</p>
<p>That should be it, if you have something like this.</p>
<p><img src="/images/8/image2.png" style="width:50%"></p>
<p>Just to leave final code<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Mask</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Shader shader;</span><br><span class="line">    <span class="keyword">public</span> Texture texture;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Material _material;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _material = <span class="keyword">new</span> Material(shader);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnRenderImage</span>(<span class="params">RenderTexture source, RenderTexture destination</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _material.SetTexture(<span class="string">"u_maskTex"</span>, texture);</span><br><span class="line">        _material.SetVector(<span class="string">"u_resolution"</span>, <span class="keyword">new</span> Vector2(Screen.width, Screen.height));</span><br><span class="line">        Graphics.Blit(source, destination, _material);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">Shader "Hidden/Mask"</span><br><span class="line">&#123;</span><br><span class="line">	Properties</span><br><span class="line">	&#123;</span><br><span class="line">		_MainTex ("Texture", 2D) = "white" &#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	SubShader</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// No culling or depth</span></span><br><span class="line">		Cull Off ZWrite Off ZTest Always</span><br><span class="line"></span><br><span class="line">		Pass</span><br><span class="line">		&#123;</span><br><span class="line">			CGPROGRAM</span><br><span class="line">			<span class="meta">#pragma vertex vert</span></span><br><span class="line">			<span class="meta">#pragma fragment frag</span></span><br><span class="line">			</span><br><span class="line">			<span class="meta">#include "UnityCG.cginc"</span></span><br><span class="line"></span><br><span class="line">			struct appdata</span><br><span class="line">			&#123;</span><br><span class="line">				float4 vertex : POSITION;</span><br><span class="line">				float2 uv : TEXCOORD0;</span><br><span class="line">			&#125;;</span><br><span class="line"></span><br><span class="line">			struct v2f</span><br><span class="line">			&#123;</span><br><span class="line">				float2 uv : TEXCOORD0;</span><br><span class="line">				float4 vertex : SV_POSITION;</span><br><span class="line">			&#125;;</span><br><span class="line"></span><br><span class="line">			v2f vert (appdata v)</span><br><span class="line">			&#123;</span><br><span class="line">				v2f o;</span><br><span class="line">				o.vertex = UnityObjectToClipPos(v.vertex);</span><br><span class="line">				o.uv = v.uv;</span><br><span class="line">				<span class="keyword">return</span> o;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="type">sampler2D</span> _MainTex;</span><br><span class="line">			<span class="type">sampler2D</span> u_maskTex;</span><br><span class="line">			half2 u_resolution;</span><br><span class="line"></span><br><span class="line">			half rect_mask(half2 uv, half x, half y, half w, half h)</span><br><span class="line">			&#123;</span><br><span class="line">				uv.x *= u_resolution.x / u_resolution.y;</span><br><span class="line">				<span class="keyword">if</span> (uv.x &gt;= x &amp;&amp; uv.x &lt;= x + w</span><br><span class="line">					&amp;&amp; uv.y &gt;= y &amp;&amp; uv.y &lt;= y + h)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="number">1.</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> <span class="number">0.</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			half circle_mask(half2 uv, half2 p, half r, half b)</span><br><span class="line">			&#123;</span><br><span class="line">				uv -= <span class="number">.5</span>;</span><br><span class="line">				uv.x *= u_resolution.x / u_resolution.y;</span><br><span class="line"></span><br><span class="line">				half d = <span class="built_in">distance</span>(uv, p);</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (d &lt; r)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="built_in">smoothstep</span>(r, r - b, d);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> <span class="number">0.</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			fixed4 frag (v2f i) : SV_Target</span><br><span class="line">			&#123;</span><br><span class="line">				fixed4 col = tex2D(_MainTex, i.uv);</span><br><span class="line">				<span class="comment">/*</span></span><br><span class="line"><span class="comment">				half2 maskUv = i.uv;</span></span><br><span class="line"><span class="comment">				maskUv -= .5;</span></span><br><span class="line"><span class="comment">				maskUv.x *= u_resolution.x / u_resolution.y;</span></span><br><span class="line"><span class="comment">				maskUv += .5;</span></span><br><span class="line"><span class="comment">				maskUv.x = clamp(maskUv.x, 0., 1.);</span></span><br><span class="line"><span class="comment">				fixed4 mask = tex2D(u_maskTex, maskUv);</span></span><br><span class="line"><span class="comment">				*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">				<span class="keyword">return</span> col * circle_mask(i.uv, half2(<span class="number">0.</span>, <span class="number">0.</span>), <span class="number">0.3</span>, <span class="number">0.05</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			ENDCG</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Oh yeah, you don’t have to limit yourself to simple shapes, anything can go.<br>Check out this piece of art. Do it with your name or something better :)</p>
<p><img src="/images/8/image5.png" style="width:50%"></p>
<p> As always code scripts are on <a href="https://github.com/luka712/Unity-Effects/tree/master/Masking" target="_blank" rel="noopener">github</a>.</p>
</article></main><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/babylonjs/3.3.0-alpha.12/babylon.js"></script><script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script><script src="https://cdn.jsdelivr.net/npm/babylonjs-gui@3.3.0/babylon.gui.min.js"></script><script src="/scripts/index.js" type="text/javascript"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
e=o.createElement(i);r=o.getElementsByTagName(i)[0];
e.src='//www.google-analytics.com/analytics.js';
r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','UA-121717766-1');ga('send','pageview');</script></body></html>